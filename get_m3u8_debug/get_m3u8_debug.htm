<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"> 
		<title>GreaseMonkey get_m3u8 debug</title>
	</head>
	<body>
		<a style="display: none; width: 840px; height: 472px;" href="http://videos.francetv.fr/id-video=147338657@Info-web" id="catchup_old" class="video"></a>
		<a style="display: none; width: 840px; height: 472px;" href="http://videos.francetv.fr/video/147338657@Info-web" id="catchup" class="video"></a>
		<script>
			var el = document.getElementById("catchup_old");

			var id = el.href.match(/id-video=(.*)@/)[1];
			alert("test 1 - regex without slash: " + id);

			var script = document.createElement("script");
			script.innerHTML = `
			(function() {
				var id = el.href.match(/id-video=(.*)@/)[1];
				alert("test 2 - regex without slash as text: " + id);
			})();`;
			document.getElementsByTagName("head")[0].appendChild(script);
			
			
			var el = document.getElementById("catchup");

			var id = el.href.match(/video\/(.*)@/)[1];
			alert("test 3 - regex with slash: " + id);

			var script = document.createElement("script");
			script.innerHTML = `
			(function() {
				var id = el.href.match(/video\/(.*)@/)[1];
				alert("test 4 - regex with slash as text: " + id);
			})();`;
			document.getElementsByTagName("head")[0].appendChild(script);
		</script>
	</body>
</html>
